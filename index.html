<!DOCTYPE html>
<html>
	<head>
		<link rel="shortcut icon" href="">
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
		<script
		  src="js/jquery-3.1.1.min.js"
		  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
		  crossorigin="anonymous"></script>
		<script src="semantic/dist/semantic.min.js"></script>	
		<script src="js/dom-to-image.js"></script>
		<script type="text/javascript">
			//CODE FOR second pop-up fixed menu when scorlling past first section
			$(document).ready(function() {
			  // fix menu when passed
			  $('.parallax-container')
			    .visibility({
			      once: false,
			      onBottomPassed: function() {
			        $('.fixed.menu').transition('fade in');
			      },
			      onBottomPassedReverse: function() {
			        $('.fixed.menu').transition('fade out');
			      }
			    });
			  // create sidebar and attach to menu open
			  $('.ui.sidebar').sidebar('attach events', '.toc.item');
			});	
		</script>

	</head>
	<body>
	  <div class="ui page overlay dimmer">
	    <div class="ui large text loader">Loading</div>
	  </div>
	<script src="js/create_tiles.js"></script>
	<script type="text/javascript">
		$('.dimmer').dimmer('show');
	</script>	  

	<!-- Following Menu -->
	<div class="ui large top fixed hidden inverted menu">
	  <div class="ui container">
	    <a class="active item" href="index.html">Home</a>
	    <a class="item">Mechanics</a>
	    <a class="item" href="team.html">Team</a>
	    <a class="item">Contact</a>
	    <div class="right menu">
	      <div class="item">
	        <a class="ui inverted button" href="leaderboard.html">Leaderboards</a>
	      </div>
	    </div>
	  </div>
	</div>

	<div class="pusher">	
		<div id="top-menu" class="ui large secondary inverted pointing menu">
		  <div class="ui container">	
		    <a class="active item" href="index.html">Home</a>
		    <a class="item">Mechanics</a>
		    <a class="item" href="team.html">Team</a>
		    <a class="item">Contact</a>
		    <div class="right menu">
		    	<div class="item">
		    		<div class="ui inverted button"><a href="leaderboard.html">Leaderboards</a></div>
		    	</div>
		    </div>
		  </div>
		</div>	
		<div id="intro" class="parallax-container">

		</div>


		<div id="first-panel" class="ui inverted vertical masthead center aligned segment">

			<div class="ui text container">
		    	<h1 class="ui inverted">
		    		Available now on Steam for <span style="color:#FF1493 !important">FREE</span>
		    	</h1>
		    	<br>
	    		<div class="row">
	    			<div class="ui huge vw_pink button">Download now   <i class="download icon"></i></div>
	    		</div>
	    		<br>
				<video width="640" height="480" controls>
				  <source src="img/trailer.mp4" type="video/mp4">
				Your browser does not support the video tag.
				</video>	    		
			</div>
			
		</div>
		<div class="ui vertical stripe segment" id="headsetAndGun">
		    <div class="ui middle aligned stackable grid container">
		    	<div class="row">
					<div class="ui two column centered stackable grid">
						<div class="row">
						  <div class="column"><img src="img/game-1.png"></div>
						  <div class="column"><img src="img/game-2.png"></div>
						</div>	
						<div class="two row">
						  <div class="column"><img src="img/game-3.png"></div>
						  <div class="column"><img src="img/game-4.png"></div>
						</div>	
					</div>				      
		    	</div>
			</div>
		</div>
		<div class="ui vertical stripe segment">
		    <div class="ui middle aligned stackable grid container">
		    	<div class="row">
		    		<div class="ui text container">
				      <h1 class="ui header">
				        VR Headset and Gun
				      </h1>
<!-- 						<div class="sketchfab-embed-wrapper"><iframe width="640" height="480" src="https://sketchfab.com/models/910be433ccf447dcb54afee54d32f8b3/embed?autospin=0.2&amp;autostart=1&amp;camera=0" frameborder="0" allowvr allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" onmousewheel=""></iframe></div> -->
					</div>
		    	</div>
			</div>
		</div>
	</div>
	</body>
	<script src="js/rellax.min.js"></script>	
	<script type="text/javascript">		
		window.onload = function () {

			add_tiles("blank");
	        var left = add_tiles("padding"); 
	        var img = new Image();
	        img.src = "img/bckgnd_tiles_s.png";
	        img.style.left = left.toString() + "px";
	        img.style.position = "fixed";
	        img.style.zIndex = "0";
			var node = document.getElementById('intro');
			node.insertBefore(img,node.firstChild);

			img.onload = function () {
					try {
	        			var rellax = new Rellax('.rellax');
					} catch (e) {
						console.log(e);
					}
		        //this adijust the maring top of the next div base on the height of the background tile image
	        	var bckgnd_tiles_height = $('#intro img')[0].height;
		        //console.log(bckgnd_tiles_height);
		        bckgnd_tiles_height = (bckgnd_tiles_height-100).toString();
		        document.getElementById("first-panel").style.marginTop = bckgnd_tiles_height + "px";
		        $('.dimmer').dimmer('hide');
			}

			//STEPS:
			//1. generate background tiles
			//2. convert backgorund tiles into an png image
			//3. delete generated background tiles
			//4. append converted png image of background tiles to replace generated background tiles (having an image instead of many img tags of each tile requires less resources)
			//5. generate blank tiles

			//add_tiles("color");
			// var node = document.getElementById('intro');
			// domtoimage.toPng(node)
			//     .then(function (dataUrl) {
			//         var img = new Image();
			//         img.src = dataUrl;
			//         //remove tiles
			// 		while (node.firstChild) {
			// 		    node.removeChild(node.firstChild);
			// 		}			        
			//         node.appendChild(img);


			//         add_tiles("blank");
			//         var rellax = new Rellax('.rellax');
			//         //this adijust the maring top of the next div base on the height of the background tile image
			//         var bckgnd_tiles_height = $('#intro img')[0].height;
			//         console.log(bckgnd_tiles_height);
			//         bckgnd_tiles_height = (bckgnd_tiles_height-100).toString();
			//         document.getElementById("first-panel").style.marginTop = bckgnd_tiles_height + "px";
			//         $('.dimmer').dimmer('hide');
			//     })
			//     .catch(function (error) {
			//     	$('.dimmer').dimmer('hide');
			//         console.error('oops, something went wrong!', error);
			//     });			
		}		
	</script>
</html>
