<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
		<script
		  src="https://code.jquery.com/jquery-3.1.1.min.js"
		  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
		  crossorigin="anonymous"></script>
		<script src="semantic/dist/semantic.min.js"></script>	
		<script type="text/javascript">
			$(document).ready(function() {
			  // fix menu when passed
			  $('.masthead')
			    .visibility({
			      once: false,
			      onBottomPassed: function() {
			        $('.fixed.menu').transition('fade in');
			      },
			      onBottomPassedReverse: function() {
			        $('.fixed.menu').transition('fade out');
			      }
			    });
			  // create sidebar and attach to menu open
			  $('.ui.sidebar').sidebar('attach events', '.toc.item');
			});	
		</script>
		<style type="text/css">
			body { margin: 0; }
			canvas { width: 100%; height: 100% }	
		</style>
	</head>
	<body>

	<!-- load three.js for 3d models -->
	<script src="js/three.js"></script>

	<!-- Following Menu -->
	<div class="ui large top fixed hidden menu">
	  <div class="ui container">
	  	<a class="toc item">
        	<i class="sidebar icon"></i>
        </a>
	    <a class="active item">Home</a>
	    <a class="item">Mechanics</a>
	    <a class="item">Contact</a>
	    <div class="right menu">
	      <div class="item">
	        <a class="ui button">Leaderboards</a>
	      </div>
	    </div>
	  </div>
	</div>

	<div class="pusher">	
		<div id="top-menu" class="ui large secondary inverted pointing menu">
		    <a class="active item">Home</a>
		    <a class="item">Mechanics</a>
		    <a class="item">Contact</a>
		    <div class="right item">
		    	<a class="ui inverted button">Leaderboards</a>
		    </div>
		</div>	
		<div class="parallax-container">
		    <div class="parallax-layer layer-0" data-parallax-speed="0.05" data-max-scroll="565"></div>
		    <div class="parallax-layer layer-1" data-parallax-speed="0.1" data-max-scroll="565"></div>
		    <div class="parallax-layer layer-2" data-parallax-speed="0.1" data-max-scroll="565"></div>
		    <div class="parallax-layer layer-3" data-parallax-speed="0.2" data-max-scroll="565"></div>
		    <div class="parallax-layer layer-4" data-parallax-speed="0.3" data-max-scroll="565"></div>
		    <div class="parallax-layer layer-5" data-parallax-speed="0.4" data-max-scroll="565"></div>
		    <div class="parallax-layer layer-6" data-parallax-speed="0.5" data-max-scroll="565"></div>		    
		</div>

		<div id="first-panel" class="ui inverted vertical masthead center aligned segment">
		    <div class="ui container">
		    </div>	
			<div class="ui text container">
		      <h1 class="ui inverted header">
		        OP4's game innit
		      </h1>
		      <h2>Some game story shizzles</h2>
		      <div class="ui huge primary button">Download now<i class="right arrow icon"></i></div>		
			</div>
		</div>
		<div class="ui vertical stripe segment">
		    <div class="ui middle aligned stackable grid container">
		    	<div class="row">
		    		<div class="ui text container">
				      <h1 class="ui header">
				        Co-op VR Tower Defence 
				      </h1>
				      <h2>Explain the shizzle</h2>	
					</div>
		    	</div>
			</div>
		</div>
		<div class="ui vertical stripe segment">
		    <div class="ui middle aligned stackable grid container">
		    	<div class="row">
		    		<div class="ui text container">
				      <h1 class="ui header">
				        VR Headset and Gun
				      </h1>
				      <h2>Explain the shizzle</h2>		
					</div>
		    	</div>
			</div>
		</div>
		<div class="ui vertical stripe segment">
		    <div class="ui middle aligned stackable grid container">
		    	<div class="row">
		    		<div class="ui text container">
				      <h1 class="ui header">
				        Trailer
				      </h1>
				      <h2>Explain the shizzle</h2>			
					</div>
		    	</div>
			</div>
		</div>
		<div class="ui vertical stripe segment">
		    <div class="ui middle aligned stackable grid container">
		    	<div class="row">
		    		<div class="ui text container">
				      <h1 class="ui header">
				        Online leaderboard
				      </h1>
				      <h2>Compete with your peers and other top global players</h2>		
					</div>
		    	</div>
			</div>
		</div>
	</div>
	</body>
	<script src="js/parallax.js"></script>
	<script src="js/three.js"></script>

	<script src="js/STLLoader.js"></script>

	<script src="js/Detector.js"></script>
	<script src="js/stats.min.js"></script>

	<script>
		if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
		var container, stats;
		var camera, cameraTarget, scene, renderer;
		init();
		animate();
		function init() {
			container = document.createElement( 'div' );
			document.getElementById("first-panel").appendChild( container );
			camera = new THREE.PerspectiveCamera( 35, window.innerWidth / window.innerHeight, 1, 15 );
			camera.position.set( 3, 0.15, 3 );
			cameraTarget = new THREE.Vector3( 0, -0.25, 0 );
			scene = new THREE.Scene();
			scene.background = new THREE.Color( 0x72645b );
			scene.fog = new THREE.Fog( 0x72645b, 2, 15 );
			// Ground
			var plane = new THREE.Mesh(
				new THREE.PlaneBufferGeometry( 40, 40 ),
				new THREE.MeshPhongMaterial( { color: 0x999999, specular: 0x101010 } )
			);
			plane.rotation.x = -Math.PI/2;
			plane.position.y = -0.5;
			scene.add( plane );
			plane.receiveShadow = true;
			// ASCII file
			var loader = new THREE.STLLoader();
			loader.load( './models/stl/ascii/slotted_disk.stl', function ( geometry ) {
				var material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200 } );
				var mesh = new THREE.Mesh( geometry, material );
				mesh.position.set( 0, - 0.25, 0.6 );
				mesh.rotation.set( 0, - Math.PI / 2, 0 );
				mesh.scale.set( 0.5, 0.5, 0.5 );
				mesh.castShadow = true;
				mesh.receiveShadow = true;
				scene.add( mesh );
			} );
			// Lights
			scene.add( new THREE.HemisphereLight( 0x443333, 0x111122 ) );
			addShadowedLight( 1, 1, 1, 0xffffff, 1.35 );
			addShadowedLight( 0.5, 1, -1, 0xffaa00, 1 );
			// renderer
			renderer = new THREE.WebGLRenderer( { antialias: true } );
			renderer.setPixelRatio( window.devicePixelRatio );
			renderer.setSize( 400, 400 );
			renderer.gammaInput = true;
			renderer.gammaOutput = true;
			renderer.shadowMap.enabled = true;
			container.appendChild( renderer.domElement );
			// stats
			stats = new Stats();
			container.appendChild( stats.dom );
			//
			window.addEventListener( 'resize', onWindowResize, false );
		}
		function addShadowedLight( x, y, z, color, intensity ) {
			var directionalLight = new THREE.DirectionalLight( color, intensity );
			directionalLight.position.set( x, y, z );
			scene.add( directionalLight );
			directionalLight.castShadow = true;
			var d = 1;
			directionalLight.shadow.camera.left = -d;
			directionalLight.shadow.camera.right = d;
			directionalLight.shadow.camera.top = d;
			directionalLight.shadow.camera.bottom = -d;
			directionalLight.shadow.camera.near = 1;
			directionalLight.shadow.camera.far = 4;
			directionalLight.shadow.mapSize.width = 1024;
			directionalLight.shadow.mapSize.height = 1024;
			directionalLight.shadow.bias = -0.002;
		}
		function onWindowResize() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize( window.innerWidth, window.innerHeight );
		}
		function animate() {
			requestAnimationFrame( animate );
			render();
			stats.update();
		}
		function render() {
			var timer = Date.now() * 0.0005;
			camera.position.x = Math.cos( timer ) * 3;
			camera.position.z = Math.sin( timer ) * 3;
			camera.lookAt( cameraTarget );
			renderer.render( scene, camera );
		}
	</script>		
</html>
